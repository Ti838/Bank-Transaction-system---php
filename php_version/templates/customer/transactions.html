<section class="max-w-7xl mx-auto py-12 px-6">
    <div class="mb-10 flex justify-between items-end border-b border-primary-500/10 pb-6">
        <div>
            <h1 class="text-4xl font-black gradient-text tracking-tighter uppercase">Operations Stream</h1>
            <p class="text-gray-500 font-bold text-[10px] tracking-[0.2em] uppercase">All Secure Node Records</p>
        </div>
        <a href="dashboard.php"
            class="text-[10px] font-black text-primary-400 uppercase tracking-widest hover:underline"><i
                class="fas fa-chevron-left mr-2"></i>Nexus Dashboard</a>
    </div>

    <div class="glass-light rounded-[2.5rem] border border-primary-500/10 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full text-left">
                <thead>
                    <tr class="border-b border-primary-500/10 bg-primary-500/5">
                        <th class="py-6 px-8 text-[11px] font-black text-gray-500 uppercase tracking-widest">Protocol
                            Type</th>
                        <th class="py-6 px-8 text-[11px] font-black text-gray-500 uppercase tracking-widest">Execution
                            Date</th>
                        <th class="py-6 px-8 text-[11px] font-black text-gray-500 uppercase tracking-widest">Description
                        </th>
                        <th class="py-6 px-8 text-right text-[11px] font-black text-gray-500 uppercase tracking-widest">
                            Magnitude</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-800">
                    <?php if ($transactions): ?>
                    <?php foreach ($transactions as $t): ?>
                    <tr class="hover:bg-primary-500/5 transition-colors">
                        <td class="py-6 px-8">
                            <div class="flex items-center space-x-4">
                                <div
                                    class="w-10 h-10 rounded-xl flex items-center justify-center 
                                            <?php echo ($t['transaction_type'] == 'Deposit' || ($t['transaction_type'] == 'Transfer' && $t['to_account_id'] == $account['id'])) ? 'bg-success-500/20 text-success-500' : 'bg-red-500/20 text-red-500'; ?>">
                                    <i
                                        class="fas <?php echo ($t['transaction_type'] == 'Deposit' || ($t['transaction_type'] == 'Transfer' && $t['to_account_id'] == $account['id'])) ? 'fa-plus' : 'fa-minus'; ?> text-xs"></i>
                                </div>
                                <span class="text-xs font-black uppercase tracking-widest text-white">
                                    <?php 
                                            if ($t['transaction_type'] == 'Transfer') {
                                                echo $t['from_account_id'] == $account['id'] ? 'Outgoing Transfer' : 'Incoming Transfer';
                                            } else {
                                                echo $t['transaction_type'];
                                            }
                                            ?>
                                </span>
                            </div>
                        </td>
                        <td class="py-6 px-8">
                            <span class="text-[10px] font-mono font-bold text-gray-400">
                                <?php echo date('Y-m-d H:i:s', strtotime($t['created_at'])); ?>
                            </span>
                        </td>
                        <td class="py-6 px-8 text-[10px] font-bold text-gray-500 uppercase">
                            <?php echo $t['description']; ?>
                        </td>
                        <td
                            class="py-6 px-8 text-right font-black text-sm <?php echo ($t['transaction_type'] == 'Deposit' || ($t['transaction_type'] == 'Transfer' && $t['to_account_id'] == $account['id'])) ? 'text-success-500' : 'text-red-500'; ?>">
                            à§³
                            <?php echo number_format($t['amount'], 2); ?>
                        </td>
                    </tr>
                    <?php endforeach; ?>
                    <?php else: ?>
                    <tr>
                        <td colspan="4"
                            class="py-20 text-center text-gray-600 font-bold uppercase text-[10px] tracking-widest italic">
                            No records found in current stream.
                        </td>
                    </tr>
                    <?php endif; ?>
                </tbody>
            </table>
        </div>
    </div>
</section>