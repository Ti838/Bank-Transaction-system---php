<section class="max-w-7xl mx-auto py-12 px-6">
    <div class="mb-10 flex justify-between items-end border-b border-primary-500/10 pb-6">
        <div>
            <h1 class="text-4xl font-black gradient-text tracking-tighter uppercase">Vault Oversight</h1>
            <p class="text-gray-500 font-bold text-[10px] tracking-[0.2em] uppercase">Account Integrity & Liquidity
                Monitoring</p>
        </div>
        <a href="dashboard.php"
            class="text-[10px] font-black text-primary-400 uppercase tracking-widest hover:underline"><i
                class="fas fa-chevron-left mr-2"></i>Nexus Dashboard</a>
    </div>

    <?php if (isset($_SESSION['flash'])): ?>
        <div
            class="mb-8 p-4 bg-<?php echo $_SESSION['flash']['type'] === 'success' ? 'success' : 'red'; ?>-500/20 border border-<?php echo $_SESSION['flash']['type'] === 'success' ? 'success' : 'red'; ?>-500 text-white rounded-xl text-center text-[10px] font-black uppercase tracking-widest">
            <i class="fas fa-circle-notch fa-spin mr-2"></i>
            <?php echo $_SESSION['flash']['message'];
            unset($_SESSION['flash']); ?>
        </div>
    <?php endif; ?>

    <div class="glass-light rounded-[2rem] border border-primary-500/10 overflow-hidden shadow-2xl">
        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-slate-900/50 text-[10px] font-black text-gray-500 uppercase tracking-widest">
                        <th class="py-6 px-8 border-b border-primary-500/10">Vault ID / Created</th>
                        <th class="py-6 px-8 border-b border-primary-500/10">Guardian (Owner)</th>
                        <th class="py-6 px-8 border-b border-primary-500/10">Protocol</th>
                        <th class="py-6 px-8 border-b border-primary-500/10 text-right">Liquidity</th>
                        <th class="py-6 px-8 border-b border-primary-500/10 text-center">Containment</th>
                        <th class="py-6 px-8 border-b border-primary-500/10 text-center">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-primary-500/5">
                    <?php foreach ($accounts as $a): ?>
                        <tr class="hover:bg-primary-500/5 transition-colors group">
                            <td class="py-6 px-8">
                                <p class="text-sm font-black text-white font-mono">
                                    <?php echo $a['account_number']; ?>
                                </p>
                                <p class="text-[9px] text-gray-600 font-bold uppercase">
                                    <?php echo date('d M Y', strtotime($a['created_at'])); ?>
                                </p>
                            </td>
                            <td class="py-6 px-8">
                                <p class="text-[10px] font-black text-white uppercase">
                                    <?php echo $a['full_name']; ?>
                                </p>
                                <p class="text-[9px] text-gray-500 font-bold uppercase">
                                    <?php echo $a['email']; ?>
                                </p>
                            </td>
                            <td class="py-6 px-8">
                                <span
                                    class="px-2 py-0.5 bg-primary-500/10 text-primary-500 rounded text-[9px] font-black uppercase tracking-tighter border border-primary-500/20">
                                    <?php echo $a['account_type']; ?>
                                </span>
                            </td>
                            <td class="py-6 px-8 text-right">
                                <p class="text-sm font-black text-white">à§³
                                    <?php echo number_format($a['balance'], 0); ?>
                                </p>
                            </td>
                            <td class="py-6 px-8 text-center">
                                <span
                                    class="px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border 
                                    <?php echo $a['status'] == 'Active' ? 'bg-success-500/10 text-success-500 border-success-500/30' : 'bg-red-500/10 text-red-500 border-red-500/30'; ?>">
                                    <?php echo $a['status']; ?>
                                </span>
                            </td>
                            <td class="py-6 px-8">
                                <div class="flex justify-center items-center space-x-2">
                                    <a href="credit.php?id=<?php echo $a['id']; ?>"
                                        class="p-2 bg-primary-500/10 text-primary-500 rounded-lg hover:bg-primary-500 hover:text-white transition-all text-[10px] font-black uppercase tracking-widest"
                                        title="Inject Assets">
                                        <i class="fas fa-plus mr-1"></i> Credit
                                    </a>
                                    <?php if ($a['status'] == 'Active'): ?>
                                        <a href="accounts.php?action=suspend&id=<?php echo $a['id']; ?>"
                                            class="p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all text-[10px] font-black uppercase tracking-widest"
                                            onclick="return confirm('Initiate Vault Containment (Suspension)?')">
                                            Suspend
                                        </a>
                                    <?php else: ?>
                                        <a href="accounts.php?action=activate&id=<?php echo $a['id']; ?>"
                                            class="p-2 bg-success-500/10 text-success-500 rounded-lg hover:bg-success-500 hover:text-white transition-all text-[10px] font-black uppercase tracking-widest">
                                            Activate
                                        </a>
                                    <?php endif; ?>
                                </div>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>
    </div>
</section>