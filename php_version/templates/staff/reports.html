<section class="max-w-7xl mx-auto py-12 px-6">
    <div class="mb-10 flex justify-between items-end border-b border-primary-500/10 pb-6 print:hidden">
        <div>
            <h1 class="text-4xl font-black gradient-text tracking-tighter uppercase">Intelligence Hub</h1>
            <p class="text-gray-500 font-bold text-[10px] tracking-[0.2em] uppercase">Daily Operational Manifest /
                Sector Delta</p>
        </div>
        <div class="flex space-x-4">
            <a href="reports.php?export=csv"
                class="h-10 px-5 bg-success-500/10 text-success-500 border border-success-500/20 rounded-xl flex items-center text-[10px] font-black uppercase tracking-widest hover:bg-success-500 hover:text-white transition-all">
                <i class="fas fa-file-csv mr-2 text-xs"></i>Export CSV
            </a>
            <button onclick="window.print()"
                class="h-10 px-5 bg-primary-500/10 text-primary-500 border border-primary-500/20 rounded-xl flex items-center text-[10px] font-black uppercase tracking-widest hover:bg-primary-500 hover:text-white transition-all">
                <i class="fas fa-print mr-2 text-xs"></i>Hardcopy
            </button>
        </div>
    </div>

    <!-- Aggregate Snapshot -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
        <div class="glass-light p-8 rounded-[2rem] border border-success-500/10 relative overflow-hidden">
            <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-4">Aggregate Ingress</p>
            <h3 class="text-3xl font-black text-success-400">৳
                <?php echo number_format($total_in, 0); ?>
            </h3>
            <div class="absolute -right-4 -bottom-4 w-20 h-20 bg-success-500/5 rounded-full blur-2xl"></div>
        </div>
        <div class="glass-light p-8 rounded-[2rem] border border-red-500/10 relative overflow-hidden">
            <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-4">Aggregate Egress</p>
            <h3 class="text-3xl font-black text-red-400">৳
                <?php echo number_format($total_out, 0); ?>
            </h3>
            <div class="absolute -right-4 -bottom-4 w-20 h-20 bg-red-500/5 rounded-full blur-2xl"></div>
        </div>
        <div class="glass-light p-8 rounded-[2rem] border border-gold-400/10 relative overflow-hidden">
            <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-4">Protocol Yield (Fees)</p>
            <h3 class="text-3xl font-black text-gold-400">৳
                <?php echo number_format($total_fees, 0); ?>
            </h3>
            <div class="absolute -right-4 -bottom-4 w-20 h-20 bg-gold-400/5 rounded-full blur-2xl"></div>
        </div>
    </div>

    <div class="glass-light rounded-[2.5rem] border border-primary-500/10 overflow-hidden shadow-2xl relative">
        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-slate-900/80 text-[10px] font-black text-gray-500 uppercase tracking-widest">
                        <th class="py-6 px-8 border-b border-primary-500/10">Temporal Node</th>
                        <th class="py-6 px-8 border-b border-primary-500/10">Subject Identity</th>
                        <th class="py-6 px-8 border-b border-primary-500/10 text-center">Protocol</th>
                        <th class="py-6 px-8 border-b border-primary-500/10 text-right">Magnitude</th>
                        <th class="py-6 px-8 border-b border-primary-500/10 text-center">Security Status</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-primary-500/5">
                    <?php if ($transactions): ?>
                        <?php foreach ($transactions as $t): ?>
                            <tr class="hover:bg-primary-500/5 transition-colors group">
                                <td class="py-6 px-8">
                                    <p class="text-[10px] font-mono text-white font-black">
                                        <?php echo date('H:i:s', strtotime($t['created_at'])); ?>
                                    </p>
                                    <p class="text-[8px] text-gray-600 font-bold uppercase tracking-tighter">Delta Station</p>
                                </td>
                                <td class="py-6 px-8">
                                    <p class="text-[10px] font-black text-white uppercase">
                                        <?php echo $t['from_name'] ?: ($t['to_name'] ?: 'SYSTEM_CORE'); ?>
                                    </p>
                                    <p class="text-[9px] text-gray-500 font-mono font-bold">
                                        <?php echo $t['from_acc'] ?: $t['to_acc']; ?>
                                    </p>
                                </td>
                                <td class="py-6 px-8 text-center">
                                    <span
                                        class="px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border <?php echo $t['transaction_type'] == 'Deposit' ? 'bg-success-500/10 text-success-500 border-success-500/20' : 'bg-red-500/10 text-red-400 border-red-500/20'; ?>">
                                        <?php echo $t['transaction_type']; ?>
                                    </span>
                                </td>
                                <td class="py-6 px-8 text-right">
                                    <p class="text-sm font-black text-white">৳
                                        <?php echo number_format($t['amount'], 2); ?>
                                    </p>
                                </td>
                                <td class="py-6 px-8 text-center">
                                    <div class="flex justify-center items-center space-x-2">
                                        <div
                                            class="w-1.5 h-1.5 rounded-full <?php echo $t['status'] == 'Success' ? 'bg-success-500' : 'bg-red-500'; ?>">
                                        </div>
                                        <span
                                            class="text-[9px] font-black uppercase tracking-widest <?php echo $t['status'] == 'Success' ? 'text-success-400' : 'text-red-400'; ?>">
                                            <?php echo $t['status']; ?>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        <?php endforeach; ?>
                    <?php else: ?>
                        <tr>
                            <td colspan="5" class="py-24 text-center">
                                <i class="fas fa-satellite-dish text-4xl text-gray-800 mb-4 block"></i>
                                <p class="text-[10px] font-black text-gray-600 uppercase tracking-[0.3em]">No Temporal
                                    Manifests Found for This Cycle</p>
                            </td>
                        </tr>
                    <?php endif; ?>
                </tbody>
            </table>
        </div>

        <!-- Subtle Grid Pattern -->
        <div
            class="absolute inset-0 pointer-events-none opacity-[0.02] bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]">
        </div>
    </div>
</section>

<style>
    @media print {
        body {
            background: white !important;
            color: black !important;
        }

        .glass-light {
            background: white !important;
            border-color: #ddd !important;
            box-shadow: none !important;
        }

        .gradient-text {
            background: none !important;
            color: black !important;
            -webkit-text-fill-color: black !important;
        }

        .text-gray-500,
        .text-gray-400 {
            color: #666 !important;
        }

        .text-white {
            color: black !important;
        }

        .bg-slate-900\/80 {
            background: #eee !important;
        }

        .divide-primary-500\/5 {
            divide-color: #eee !important;
        }
    }
</style>